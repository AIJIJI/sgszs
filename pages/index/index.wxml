<view class="container">
  <view class="button-row">
    <view wx:if="{{currentNav=='群'}}" class="btn-wrapper">
      <button class="btn-skill" data-poolname="Chupai" bindtap="tapxushaoActive">
        <image
          class="icon"
          src="../../images/xushao.jpg"
          mode="aspectFit"
          alt="出牌阶段"
        />
        <span class="skill-display">出牌阶段</span>
      </button>
    </view>
    <view wx:if="{{currentNav=='群'}}" class="btn-wrapper">
      <button class="btn-skill" data-poolname="Shoushang" bindtap="tapxushaoActive">
        <image
          class="icon"
          src="../../images/xushao.jpg"
          mode="aspectFit"
          alt="受到伤害后"
        />
        <span class="skill-display">受到伤害</span>
      </button>
    </view>
    <view wx:if="{{currentNav=='群'}}" class="btn-wrapper">
      <button class="btn-skill" data-poolname="Jieshu" bindtap="tapxushaoActive">
        <image
          class="icon"
          src="../../images/xushao.jpg"
          mode="aspectFit"
          alt="结束阶段"
        />
        <span class="skill-display">结束阶段</span>
      </button>
    </view>
    <view wx:if="{{currentNav=='群'}}" class="btn-wrapper">
      <button class="btn-skill" bindtap="tapxushaoReset">
        <image
          class="icon"
          src="../../images/xushao.jpg"
          mode="aspectFit"
          alt="出牌阶段"
        />
        <span class="skill-display">重置评荐</span>
      </button>
    </view>
    <view wx:if="{{currentNav=='群'}}" class="btn-wrapper">
      <button class="btn-skill" bindtap="tapShanghaipai">
        <image
          class="icon"
          src="../../images/wangyun.jpg"
          mode="aspectFit"
          alt="连计"
        />
        <span class="skill-display">连计</span>
      </button>
    </view>
    <view wx:if="{{currentNav=='群'}}" class="btn-wrapper">
      <button class="btn-skill" bindtap="tapJingong">
        <image
          class="icon"
          src="../../images/wangyun.jpg"
          mode="aspectFit"
          alt="矜功"
        />
        <span class="skill-display">矜功</span>
      </button>
    </view>
    <view wx:if="{{currentNav=='魏'}}" class="btn-wrapper">
      <button class="btn-skill" bindtap="tapShefu">
        <image
          class="icon"
          src="../../images/chengyu.jpg"
          mode="aspectFit"
          alt="设伏"
        />
        <span class="skill-display">设伏</span>
      </button>
    </view>
    <div wx:if="{{currentNav=='群'}}" class="btn-wrapper">
      <button class="btn-skill" bindtap="tapLangxi">
        <image
          class="icon"
          src="../../images/lijue.jpg"
          mode="aspectFit"
          alt="狼袭"
        />
        <span class="skill-display">狼袭</span>
      </button>
    </div>
    <div wx:if="{{currentNav=='群'}}" class="btn-wrapper">
      <button class="btn-skill" bindtap="tapXionghuo">
          <image
            class="icon"
            src="../../images/xurong.jpg"
            mode="aspectFit"
            alt="凶镬"
          />
          <span class="skill-display">凶镬</span>
        </button>
    </div>
    <div wx:if="{{currentNav=='魏'}}" class="btn-wrapper">
      <button class="btn-skill" bindtap="tapFujian">
          <image
            class="icon"
            src="../../images/caoying.jpg"
            mode="aspectFit"
            alt="伏间"
          />
          <span class="skill-display">伏间</span>
        </button>
    </div>
    <div wx:if="{{currentNav=='魏'}}" class="btn-wrapper">
      <button class="btn-skill" bindtap="tapShanli">
          <image
            class="icon"
            src="../../images/simashi.jpg"
            mode="aspectFit"
            alt="擅立"
          />
          <span class="skill-display">擅立</span>
        </button>
    </div>
    <div wx:if="{{currentNav=='晋'}}" class="btn-wrapper">
      <button class="btn-skill" bindtap="tapGeweishu">
          <image
            class="icon"
            src="../../images/zhangchunhua.jpg"
            mode="aspectFit"
            alt="清冷"
          />
          <span class="skill-display">清冷</span>
        </button>
    </div>
    <div wx:if="{{currentNav=='魏' && DIYEnabled}}" class="btn-wrapper">
      <button class="btn-skill" bindtap="tapCaoyi">
          <image
            class="icon"
            src="../../images/caocao.jpg"
            mode="aspectFit"
            alt="清冷"
          />
          <span class="skill-display">曹裔</span>
        </button>
    </div>
  </view>
  <!-- <view wx:if="{{currentNav=='群'}}" class="btn-wrapper">
      <button class="btn-skill" bindtap="tapShouxi">
        <image
          class="icon"
          src="../../images/caojie.jpg"
          mode="aspectFit"
          alt="守玺"
        />
        <span class="skill-display">设伏</span>
      </button>
    </view> -->
</view>

<modal wx:if="{{xushao.showModal}}" no-cancel="true" confirm-text="">
  <h1>选择技能并移出技能池</h1>
  <div
    class="xushao-option"
    wx:for="{{xushao.options}}"
    wx:for-index="index"
    wx:key="index"
    wx:for-item="item"
  >
    <button class="xushao-skill-btn"
      data-option="{{item}}"
      bindtap="tapxushaoChoose"
    >
      <block wx:if="{{xushao.OWNERS[item]}}">
        {{"(" + xushao.OWNERS[item] + ")"}}
      </block>
      {{item}}
    </button>
    <p
      class="xushao-skill-info"
      wx:if="{{xushao.TEXTS[item]}}"
      data-option="{{item}}"
      bindtap="tapXushaoInfo"
    >
      {{xushao.TEXTS[item]}}
    </p>
  </div>

</modal>

<div class="modal" wx:if="{{caoying.showModal}}">
  <div class="modal-content">
    <div class="modal-body">
      <div class="modal-title">
        高亮所有可能目标
      </div>
      <div class="check-box">
        <block
          wx:for="{{caoying.numberCheckBox}}"
          wx:for-index="index"
          wx:key="index"
          wx:for-item="item"
        >
          <button
            data-index="{{index}}"
            wx:if="{{item}}"
            class="btn-checked"
            bindtap="tapFujianTarget"
          >
            {{index+1}}
          </button>
          <button 
            wx:else class="btn-unchecked" data-index="{{index}}"
            bindtap="tapFujianTarget"
          >
            {{index+1}}
          </button>
        </block>
      </div>
      <div class="modal-tail">
        <button bindtap="tapFujianRoll">
          随机
        </button>
      </div>
    </div>
  </div>
</div>

<div class="modal shefu-modal" wx:if="{{chengyu.showModal}}">
  <div class="modal-content">
    <div class="modal-body">
      <div class="modal-title">
        点击设伏卡牌，再次点击激活伏兵牌（语音提示其他玩家）
      </div>
      <div class="check-box">
        <block
          wx:for="{{chengyu.cardCheckBox}}"
        >
          <button
            data-cardname="{{index}}"
            wx:if="{{item}}"
            class="btn-checked"
            bindtap="tapShefuCard"
          >
            {{CARDS[index].shortname}}
          </button>
          <button 
            wx:else class="btn-unchecked" data-cardname="{{index}}"
            bindtap="tapShefuCard"
          > 
          {{CARDS[index].shortname}}
          </button>
        </block>
      </div>
    </div>
    <div class="modal-tail">
      <button bindtap="tapShefuReset">
        清除
      </button>
      <button bindtap="tapShefuClose">
        关闭
      </button>
    </div>
  </div>
</div>
<view class='tail-funcs'>
  <view class='pkg-switch'>
    <p>用间</p>
    <switch type='switch' checked="{{yongjianEnabled}}" bindchange='switchYongjian' />
  </view>
  <view class='pkg-switch'>
    <p>DIY</p>
    <switch type='switch' checked="{{DIYsEnabled}}" bindchange='switchDIY' />
  </view>
  <div class='pay-btn-content'>
    <button size="mini" class='pay-btn' bindtap="tapPay">
      打赏
    </button>
  </div>
</view>
<div class='nav-bar'>
  <button
    wx:for="{{['魏', '群', '晋', '吴', '蜀']}}"    
    wx:for-index="index"
    wx:key="index"
    wx:for-item="item"
    class='nav-btn'
    data-index="{{item}}"
    bindtap="tapNav"
  >
    <image class="icon" src="/images/button/{{item}}.png" mode="aspectFit" />
  </button>
</div>